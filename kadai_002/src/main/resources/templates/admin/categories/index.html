<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <div th:replace="~{fragment :: meta}"></div>   
        <div th:replace="~{fragment :: styles}"></div>
        <title>カテゴリ管理</title>	
    </head>
    <body>
        <div class="tabelogpage-wrapper">
            <div th:replace="~{fragment :: header}"></div>
            
            <main>
                <div class="container pt-4 pb-5 tabelogpage-container">
                    
                    <h2 class="mb-4">カテゴリ管理</h2>

                    <div th:if="${successMessage}" class="alert alert-success">
                        <span th:text="${successMessage}"></span>
                    </div>

                    <div class="d-flex justify-content-end mb-3">
                        <a th:href="@{/admin/categories/register}" class="btn btn-primary">カテゴリ新規登録</a>
                    </div>

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">カテゴリ名</th>
                                <th scope="col">作成日時</th>
                                <th scope="col">更新日時</th>
                                <th scope="col">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="category : ${categories}">
                                <td th:text="${category.id}">1</td>
                                <td th:text="${category.name}">和食</td>
                                <td th:text="${#temporals.format(category.createdAt, 'yyyy/MM/dd HH:mm')}">2023/01/01 10:00</td>
                                <td th:text="${category.updatedAt} ? ${#temporals.format(category.updatedAt, 'yyyy/MM/dd HH:mm')} : '---'">2023/01/01 10:00</td>
                                <td>
                                    <a th:href="@{/admin/categories/__${category.id}__/edit}" class="btn btn-sm btn-info me-2">編集</a>
                                    
                                    <form th:action="@{/admin/categories/__${category.id}__/delete}" method="post" style="display:inline;" onsubmit="return confirm('本当に削除してもよろしいですか？');">
                                        <button type="submit" class="btn btn-sm btn-danger">削除</button>
                                    </form>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    </div> 
            </main>
            
            <div th:replace="~{fragment :: footer}"></div>
        </div>    
        
        <div th:replace="~{fragment :: scripts}"></div>  
	</body>
</html>